<style>
  body {
    font: 400 11px/1.5 Monaco, Menlo, Consolas, 'Courier New', monospace;
    padding: 0;
    margin: 0;
  }

  #logs input[type=checkbox] {
    display: none;
  }

  #logs label {
    display: block;
  }

  #logs .section {
    white-space: pre-wrap;
    border-bottom: 1px solid #ddd;
    padding: 0.75ex 5ex;
    max-height: 9ex;
    overflow-y: hidden;
    background: #f8f8f8;
  }

  #logs input[type=checkbox]:checked+.section {
    max-height: 10000em;
    background: #fff;
  }

  #controls {
    position: fixed;
    top: 0;
    right: 0;
    padding: 1ex 3ex;
    border-bottom-left-radius: 2ex;
    background: rgba(255, 255, 255, 0.75);
    backdrop-filter: blur(10px);
    text-transform: uppercase;
    font-size: 10px;
    letter-spacing: .5px;
  }

  a {
    text-decoration: none;
    color: #000;
  }
</style>
<div id="controls">
  <a href="#" onclick="document.querySelectorAll('input').forEach(i => i.checked = true); return false;">Expand all</a> &nbsp;
  <a href="#" onclick="document.querySelectorAll('input').forEach(i => i.checked = false); return false;">Collapse all</a> &nbsp;
  <a href="#" onclick="document.body.scrollTo({ top: 0 }); return false;">Top</a> &nbsp;
  <a href="#" onclick="document.body.scrollTo({ top: 999999 }); return false;">Bottom</a>
</div>
<div id="logs"></div>
<script type="module">
  function saveState() {
    const inputs = document.querySelectorAll('input');
    const state = Array.from(inputs).reduce((memo, input, i) => {
      if (input.checked) memo.push(i);
      return memo;
    }, [document.body.scrollTop]).join(',');
    window.name = state;
  }
  function restoreState() {
    const state = window.name;
    if (!state) return;
    const [y, ...checked] = state.split(',').map(x => parseFloat(x));
    const inputs = document.querySelectorAll('input');
    checked.forEach(index => { if (inputs[index]) inputs[index].checked = true; });
    setTimeout(() => {
      document.body.scrollTop = y;
      window.addEventListener('scroll', saveState);
      window.addEventListener('click', saveState);
    }, 0);  // may need to open all sections before scroll position can be reinstated
  }

  import { https, postgres } from './index.js';
  // https('https://google.com').then(() => restoreState());

  postgres(location.hash.slice(1));

  // https('https://neon-cf-pg-test.jawj.workers.dev');
  // https('https://neon-vercel-demo-heritage.vercel.app');  // encrypted handshake is split across multiple messages
  // https('https://developers.cloudflare.com');
  // https('https://guardian.co.uk');
</script>