<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <style>
    body {
      font: 400 15px/1.5 Georgia, serif;
      padding: 0;
      margin: 0;
      color: #111;
    }

    a {
      color: #58e;
      text-decoration: none;
    }

    .discussion {
      padding: 3ex 5ex;
    }

    #logs input[type=checkbox] {
      display: none;
    }

    #logs label {
      display: block;
    }

    #logs,
    code {
      font: 400 11px/1.5 Monaco, Menlo, Consolas, monospace;
      white-space: pre-wrap;
      color: #777;
    }

    code {
      background: #eee;
    }

    #logs .section {
      border-top: 1px solid #ddd;
      padding: 0.75ex 5ex;
      max-height: 9ex;
      overflow-y: hidden;
      background: #f8f8f8;
    }

    #logs input[type=checkbox]:checked+.section {
      max-height: 10000em;
      background: #fff;
    }

    #controls {
      position: fixed;
      top: 0;
      right: 0;
      padding: 1ex 3ex;
      border-bottom-left-radius: 2ex;
      background: rgba(255, 255, 255, 0.75);
      backdrop-filter: blur(10px);
      text-transform: uppercase;
      font-size: 10px;
      letter-spacing: .5px;
    }

    #controls a {
      color: #000;
    }

    .easter {
      color: #ccc;
    }
  </style>
</head>

<body>
  <div id="controls">
    <a href="#" onclick="document.querySelectorAll('input').forEach(i => i.checked = true); return false;">Expand all</a> &nbsp;
    <a href="#" onclick="document.querySelectorAll('input').forEach(i => i.checked = false); return false;">Collapse all</a> &nbsp;
    <a href="#" onclick="window.scrollTo({ top: 0 }); return false;">Top</a> &nbsp;
    <a href="#" onclick="window.scrollTo({ top: 99999 }); return false;">Bottom</a>
  </div>
  <div class="discussion">
    <h1>The Annotated Live TLS 1.3 Session</h1>
    <ul>
      <li>Inspired by <a href="https://tls13.xargs.org/">The Illustrated TLS 1.3 Connection</a> and <a href="https://jvns.ca/blog/2022/03/23/a-toy-version-of-tls/">Julia Evans</a>, this page provides a live annotated TLS session.</li>
      <li>Itâ€™s built with <a href="https://github.com/jawj/subtls">subtls</a>, a pure-JS TLS implementation that makes heavy use of <a href="https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto">SubtleCrypto</a> but has no other dependencies. TCP communication is via a <a href="https://github.com/neondatabase/wsproxy">WebSocket proxy</a>.</li>
      <li>Expand or collapse each log message by clicking it. There are additional controls at top right.</li>
    </ul>
    <p id="extra"></p>
    <input id="go" type="button" value="Get this page over TLS 1.3">
  </div>
  <div id="logs"></div>
  <div class="easter discussion">
    <p><a href="https://github.com/jawj/subtls">Code on GitHub</a>. Easter egg: append a <a href="https://neon.tech">neon.tech</a> PostgreSQL connection string as the # hash part of the URL to follow along with a simple PostgreSQL session instead.</p>
  </div>
  <script src="index.js"></script>
</body>

</html>